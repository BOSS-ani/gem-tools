<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œãƒ„ãƒ¼ãƒ«ãƒãƒ–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto-Sans-JP', sans-serif;
            background-color: #111827;
            color: #F3F4F6;
        }
        .nav-button {
            background-color: #374151;
            color: #D1D5DB;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 700;
            transition: all 0.2s;
            border: 2px solid transparent;
            cursor: pointer;
        }
        .nav-button:hover {
            background-color: #4B5563;
        }
        .nav-button.active {
            background-color: #1F2937;
            color: #4F46E5;
            border-color: #4F46E5;
        }
        .tool-container {
            display: none;
        }
        .tool-container.active {
            display: block;
        }
        .step-card {
            background-color: #1F2937;
            border: 1px solid #374151;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .step-number {
            background-color: #4F46E5;
            color: white;
            border-radius: 50%;
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            flex-shrink: 0;
        }
        .main-button {
            background-color: #4F46E5;
            color: white;
            font-weight: 700;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }
        .main-button:hover {
            background-color: #4338CA;
        }
        .form-input, textarea, select {
            background-color: #374151;
            border: 1px solid #4B5563;
            border-radius: 0.5rem;
            color: #F3F4F6;
            padding: 0.75rem;
            width: 100%;
        }
        .form-input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #4F46E5;
            box-shadow: 0 0 0 2px #4F46E5;
        }
        .form-checkbox {
            background-color: #374151;
            border-color: #4B5563;
        }
        .form-checkbox:checked {
            background-color: #4F46E5;
        }
        .loader-container {
            position: fixed;
            inset: 0;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 50;
            gap: 1rem;
        }
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #4B5563;
            border-bottom-color: #F3F4F6;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        audio::-webkit-media-controls-panel { background-color: #374151; }
        audio::-webkit-media-controls-play-button,
        audio::-webkit-media-controls-volume-slider,
        audio::-webkit-media-controls-mute-button { filter: invert(1); }
        .copy-button {
            background-color: #374151;
            border: 1px solid #4B5563;
            color: #D1D5DB;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-button:hover {
            background-color: #4B5563;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-500">
                ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œãƒ„ãƒ¼ãƒ«ãƒãƒ–
            </h1>
            <p class="text-gray-400 mt-2">AIã‚’æ´»ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ã§åˆ¶ä½œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’åŠ é€Ÿã•ã›ã¾ã™ã€‚</p>
        </header>

        <!-- Navigation -->
        <nav class="flex flex-wrap justify-center gap-4 mb-10">
            <button id="nav-narration" class="nav-button" data-tool="narration">AIãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
            <button id="nav-splitter" class="nav-button" data-tool="splitter">éŸ³å£°åˆ†å‰²</button>
            <button id="nav-prompt" class="nav-button" data-tool="prompt">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ</button>
            <button id="nav-content" class="nav-button" data-tool="content">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ</button>
            <button id="nav-youtube" class="nav-button" data-tool="youtube">YouTubeæ¦‚è¦æ¬„</button>
        </nav>
        
        <div id="tool-contents">
            <!-- Tool: AI Narration Assistant -->
            <div id="narration-tool" class="tool-container">
                <h2 class="text-2xl font-bold text-center mb-6">AIãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ</h2>
                <div class="step-card">
                    <div class="flex items-start gap-4">
                        <div class="step-number">1</div>
                        <div>
                            <h3 class="text-xl font-bold mb-2">åŸç¨¿å…¥åŠ›</h3>
                            <p class="text-gray-400 mb-4">ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å…ƒã¨ãªã‚‹æ—¥æœ¬èªã®ãƒ†ã‚­ã‚¹ãƒˆã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚</p>
                            <textarea id="narration-input" class="h-40" placeholder="ã“ã“ã«ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸç¨¿ã‚’å…¥åŠ›..."></textarea>
                            <button id="generate-reading-btn" class="main-button mt-4">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>
                                <span>æ¦‚è¦ã¨èª­ã¿æ–¹ã‚’ç”Ÿæˆ</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="narration-step2" class="step-card hidden">
                    <div class="flex items-start gap-4">
                        <div class="step-number">2</div>
                        <div>
                            <h3 class="text-xl font-bold mb-2">éŸ³å£°æ¦‚è¦</h3>
                            <p class="text-gray-400 mb-4">AIãŒç”Ÿæˆã—ãŸãƒ†ã‚­ã‚¹ãƒˆã®è¦ç´„ã§ã™ã€‚</p>
                            <textarea id="narration-summary" class="h-32 text-sm" readonly></textarea>
                        </div>
                    </div>
                </div>
                <div id="narration-step3" class="step-card hidden">
                    <div class="flex items-start gap-4">
                        <div class="step-number">3</div>
                        <div>
                            <h3 class="text-xl font-bold mb-2">èª­ã¿æ–¹ã®ç¢ºèªãƒ»ä¿®æ­£</h3>
                            <p class="text-gray-400 mb-4">èª­ã¿æ–¹ãŒé•ã†ç®‡æ‰€ã¯ã€ã‚«ã‚¿ã‚«ãƒŠã‚’ç›´æ¥ç·¨é›†ã—ã¦ãã ã•ã„ã€‚</p>
                            <textarea id="narration-reading" class="h-40"></textarea>
                            <button id="convert-to-speech-btn" class="main-button mt-4">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                                <span>éŸ³å£°ã«å¤‰æ›</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="narration-step4" class="step-card hidden">
                    <div class="flex items-start gap-4">
                        <div class="step-number">4</div>
                        <div>
                            <h3 class="text-xl font-bold mb-2">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h3>
                            <p class="text-gray-400 mb-4">ç”Ÿæˆã•ã‚ŒãŸéŸ³å£°ã‚’ç¢ºèªã—ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚</p>
                            <audio id="narration-audio" controls class="w-full"></audio>
                            <a id="narration-download" class="main-button mt-4 hidden">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                                <span>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ (WAV)</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tool: Audio Splitter -->
            <div id="splitter-tool" class="tool-container">
                <h2 class="text-2xl font-bold text-center mb-6">éŸ³å£°åˆ†å‰²ãƒ„ãƒ¼ãƒ«ï¼ˆé–‹ç™ºä¸­ï¼‰</h2>
                <div class="step-card text-center">
                    <p class="text-gray-400">ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ç¾åœ¨é–‹ç™ºä¸­ã§ã™ã€‚ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚</p>
                </div>
            </div>

            <!-- Tool: Prompt Generator -->
            <div id="prompt-tool" class="tool-container">
                <h2 class="text-2xl font-bold text-center mb-6">NotebookLMç«¶é¦¬åˆ†æãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</h2>
                <div class="step-card">
                    <div class="flex items-start gap-4">
                        <div class="step-number">1</div>
                        <div>
                            <h3 class="text-xl font-bold mb-2">åˆ†ææƒ…å ±ã®å…¥åŠ›</h3>
                            <p class="text-gray-400 mb-4">NotebookLMã§ç«¶é¦¬åˆ†æã‚’è¡Œã†ãŸã‚ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                            <div class="space-y-4">
                                <div>
                                    <label for="prompt-race-name" class="block text-sm font-medium text-gray-300 mb-1">ãƒ¬ãƒ¼ã‚¹å</label>
                                    <input type="text" id="prompt-race-name" class="form-input" placeholder="ä¾‹ï¼šæ—¥æœ¬ãƒ€ãƒ¼ãƒ“ãƒ¼">
                                </div>
                                <div>
                                    <label for="prompt-analysis-type" class="block text-sm font-medium text-gray-300 mb-1">åˆ†æã®ã‚¿ã‚¤ãƒ—</label>
                                    <select id="prompt-analysis-type" class="form-input">
                                        <option value="ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»æœ‰åŠ›é¦¬è©•ä¾¡">ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»æœ‰åŠ›é¦¬è©•ä¾¡</option>
                                        <option value="è¡€çµ±åˆ†æãƒ»ç©´é¦¬æ¢ç´¢">è¡€çµ±åˆ†æãƒ»ç©´é¦¬æ¢ç´¢</option>
                                        <option value="èª¿æ•™ãƒ»çŠ¶æ…‹è©•ä¾¡">èª¿æ•™ãƒ»çŠ¶æ…‹è©•ä¾¡</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="prompt-focus-points" class="block text-sm font-medium text-gray-300 mb-1">ç‰¹ã«é‡è¦–ã™ã‚‹ç‚¹ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
                                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 mt-2">
                                        <label class="flex items-center space-x-2"><input type="checkbox" name="focus-point" value="ã‚³ãƒ¼ã‚¹é©æ€§" class="form-checkbox"><span>ã‚³ãƒ¼ã‚¹é©æ€§</span></label>
                                        <label class="flex items-center space-x-2"><input type="checkbox" name="focus-point" value="éå»ã®ãƒ¬ãƒ¼ã‚¹å®Ÿç¸¾" class="form-checkbox"><span>ãƒ¬ãƒ¼ã‚¹å®Ÿç¸¾</span></label>
                                        <label class="flex items-center space-x-2"><input type="checkbox" name="focus-point" value="é¨æ‰‹" class="form-checkbox"><span>é¨æ‰‹</span></label>
                                        <label class="flex items-center space-x-2"><input type="checkbox" name="focus-point" value="è¡€çµ±" class="form-checkbox"><span>è¡€çµ±</span></label>
                                        <label class="flex items-center space-x-2"><input type="checkbox" name="focus-point" value="èª¿æ•™å†…å®¹" class="form-checkbox"><span>èª¿æ•™å†…å®¹</span></label>
                                        <label class="flex items-center space-x-2"><input type="checkbox" name="focus-point" value="æœŸå¾…å€¤" class="form-checkbox"><span>æœŸå¾…å€¤</span></label>
                                    </div>
                                </div>
                            </div>
                            <button id="generate-prompt-btn" class="main-button mt-4">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆ</button>
                        </div>
                    </div>
                </div>
                <div id="prompt-result-section" class="step-card hidden">
                     <div class="flex items-start gap-4">
                        <div class="step-number">2</div>
                        <div>
                             <h3 class="text-xl font-bold mb-2">ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</h3>
                            <p class="text-gray-400 mb-4">ã“ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’NotebookLMã«ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã—ã¦åˆ†æã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚</p>
                            <div class="relative">
                                <textarea id="prompt-output" class="h-64 text-sm" readonly></textarea>
                                <button id="copy-prompt-btn" class="copy-button absolute top-2 right-2">ã‚³ãƒ”ãƒ¼</button>
                            </div>
                             <span id="copy-prompt-feedback" class="mt-2 inline-block text-green-400 opacity-0 transition-opacity">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tool: Content Generator -->
            <div id="content-tool" class="tool-container">
                 <h2 class="text-2xl font-bold text-center mb-6">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</h2>
                 <div class="step-card">
                     <div class="flex items-start gap-4">
                        <div class="step-number">1</div>
                        <div>
                             <h3 class="text-xl font-bold mb-2">åˆ†æãƒ‡ãƒ¼ã‚¿å…¥åŠ›</h3>
                            <p class="text-gray-400 mb-4">åˆ†æãƒ†ãƒ¼ãƒã¨é–¢é€£ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                            <div class="space-y-4">
                                <div>
                                    <label for="content-theme" class="block text-sm font-medium text-gray-300 mb-1">åˆ†æãƒ†ãƒ¼ãƒ</label>
                                    <input type="text" id="content-theme" class="form-input" placeholder="ä¾‹ï¼šãƒ­ãƒ¼ã‚ºã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ 2025 æœŸå¾…å€¤å¾¹åº•åˆ†æ">
                                </div>
                                <div>
                                    <label for="content-data" class="block text-sm font-medium text-gray-300 mb-1">åˆ†æãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ†ã‚­ã‚¹ãƒˆï¼‰</label>
                                    <textarea id="content-data" class="h-48 text-sm" placeholder="ç®‡æ¡æ›¸ãã§åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›..."></textarea>
                                </div>
                            </div>
                            <button id="generate-content-btn" class="main-button mt-4">3ç¨®é¡ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆ</button>
                        </div>
                    </div>
                </div>
                 <div id="content-result-section" class="step-card hidden">
                     <div class="flex items-start gap-4">
                        <div class="step-number">2</div>
                        <div>
                             <h3 class="text-xl font-bold mb-2">ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h3>
                            <p class="text-gray-400 mb-4">å„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚</p>
                            <div class="space-y-6">
                                <div>
                                    <h4 class="text-lg font-bold mb-2 text-indigo-400">1. ã‚¦ã‚§ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ (HTML)</h4>
                                    <div class="relative">
                                        <textarea id="content-html-output" class="h-40 text-sm" readonly></textarea>
                                        <button class="copy-button absolute top-2 right-2" data-target="content-html-output">ã‚³ãƒ”ãƒ¼</button>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-lg font-bold mb-2 text-indigo-400">2. ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åŸç¨¿</h4>
                                     <div class="relative">
                                        <textarea id="content-script-output" class="h-40 text-sm" readonly></textarea>
                                        <button class="copy-button absolute top-2 right-2" data-target="content-script-output">ã‚³ãƒ”ãƒ¼</button>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-lg font-bold mb-2 text-indigo-400">3. æ¦‚è¦ãƒ†ã‚­ã‚¹ãƒˆ</h4>
                                     <div class="relative">
                                        <textarea id="content-summary-output" class="h-40 text-sm" readonly></textarea>
                                        <button class="copy-button absolute top-2 right-2" data-target="content-summary-output">ã‚³ãƒ”ãƒ¼</button>
                                    </div>
                                </div>
                            </div>
                             <span id="copy-content-feedback" class="mt-2 inline-block text-green-400 opacity-0 transition-opacity">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tool: YouTube Description Generator -->
            <div id="youtube-tool" class="tool-container">
                 <h2 class="text-2xl font-bold text-center mb-6">YouTubeæ¦‚è¦æ¬„ è‡ªå‹•ç”Ÿæˆãƒ„ãƒ¼ãƒ«</h2>
                <div class="step-card">
                    <div class="flex items-start gap-4">
                        <div class="step-number">1</div>
                        <div>
                            <h3 class="text-xl font-bold mb-2">å‹•ç”»æƒ…å ±ã®å…¥åŠ›</h3>
                            <p class="text-gray-400 mb-4">AIãŒæ¦‚è¦æ¬„ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ã€å‹•ç”»ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                            <div class="space-y-4">
                                <div>
                                    <label for="yt-race-name" class="block text-sm font-medium text-gray-300 mb-1">ãƒ¬ãƒ¼ã‚¹å</label>
                                    <input type="text" id="yt-race-name" class="form-input" placeholder="ä¾‹ï¼šæœ‰é¦¬è¨˜å¿µ">
                                </div>
                                <div>
                                    <label for="yt-key-point" class="block text-sm font-medium text-gray-300 mb-1">ãƒ¬ãƒ¼ã‚¹ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ</label>
                                    <input type="text" id="yt-key-point" class="form-input" placeholder="å‹•ç”»å†…ã§å¼·èª¿ã—ãŸãƒ¬ãƒ¼ã‚¹ã®éµï¼ˆä¾‹ï¼šæ³¢ä¹±ã®ãƒãƒ³ãƒ‡æˆ¦ï¼‰">
                                </div>
                                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="yt-horse1" class="block text-sm font-medium text-gray-300 mb-1">æ³¨ç›®é¦¬1 (æœ¬å‘½)</label>
                                        <input type="text" id="yt-horse1" class="form-input" placeholder="å‹•ç”»ã®æœ¬å‘½é¦¬">
                                    </div>
                                    <div>
                                        <label for="yt-horse2" class="block text-sm font-medium text-gray-300 mb-1">æ³¨ç›®é¦¬2 (å¯¾æŠ—)</label>
                                        <input type="text" id="yt-horse2" class="form-input" placeholder="å‹•ç”»ã®å¯¾æŠ—é¦¬">
                                    </div>
                                     <div>
                                        <label for="yt-darkhorse" class="block text-sm font-medium text-gray-300 mb-1">ä¼å…µé¦¬</label>
                                        <input type="text" id="yt-darkhorse" class="form-input" placeholder="å‹•ç”»ã®ç©´é¦¬">
                                    </div>
                                    <div>
                                        <label for="yt-otherhorse" class="block text-sm font-medium text-gray-300 mb-1">ãã®ä»–ã®æ³¨ç›®é¦¬</label>
                                        <input type="text" id="yt-otherhorse" class="form-input" placeholder="ãã®ä»–ã«è¨€åŠã—ãŸé¦¬">
                                    </div>
                                </div>
                                 <div>
                                    <label for="yt-analysis-points" class="block text-sm font-medium text-gray-300 mb-1">åˆ†æãƒã‚¤ãƒ³ãƒˆ (ç®‡æ¡æ›¸ãã§3ã¤)</label>
                                    <textarea id="yt-analysis-points" class="h-24 text-sm" placeholder="ä¾‹ï¼š&#10;ãƒ»éå»ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã¯å†…æ æœ‰åˆ©&#10;ãƒ»ã€‡ã€‡ç”£é§’ã®å¥½èµ°ç‡ãŒé«˜ã„&#10;ãƒ»å‰èµ°ä¸ŠãŒã‚Šæœ€é€Ÿé¦¬ã«æ³¨ç›®"></textarea>
                                </div>
                                <div>
                                     <label for="yt-must-include" class="block text-sm font-medium text-gray-300 mb-1">æ¦‚è¦æ¬„ã«å¿…ãšå«ã‚ãŸã„å†…å®¹</label>
                                     <textarea id="yt-must-include" class="h-24 text-sm" placeholder="ã“ã®å‹•ç”»ãªã‚‰ã§ã¯ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„å®£ä¼ãªã©ã‚’å…¥åŠ›..."></textarea>
                                </div>
                            </div>
                             <button id="generate-youtube-btn" class="main-button mt-4">
                                 <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>ã‚¿ã‚¤ãƒˆãƒ«ã¨æ¦‚è¦æ¬„ã‚’ç”Ÿæˆ</span>
                            </button>
                        </div>
                    </div>
                </div>
                 <div id="youtube-result-section" class="step-card hidden">
                    <div class="flex items-start gap-4">
                        <div class="step-number">2</div>
                        <div>
                            <h3 class="text-xl font-bold mb-2">ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h3>
                            <p class="text-gray-400 mb-4">ç”Ÿæˆã•ã‚ŒãŸã‚¿ã‚¤ãƒˆãƒ«ã¨æ¦‚è¦æ¬„ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€YouTubeã§æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚</p>
                            <div class="space-y-6">
                                 <div>
                                    <h4 class="text-lg font-bold mb-2 text-indigo-400">YouTubeå‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«æ¡ˆ</h4>
                                    <div class="relative">
                                        <textarea id="youtube-title-output" class="h-20 text-base" readonly></textarea>
                                        <button class="copy-button absolute top-2 right-2" data-target="youtube-title-output">ã‚³ãƒ”ãƒ¼</button>
                                    </div>
                                </div>
                                 <div>
                                    <h4 class="text-lg font-bold mb-2 text-indigo-400">YouTubeæ¦‚è¦æ¬„</h4>
                                     <div class="relative">
                                        <textarea id="youtube-desc-output" class="h-96 text-sm" readonly></textarea>
                                        <button class="copy-button absolute top-2 right-2" data-target="youtube-desc-output">ã‚³ãƒ”ãƒ¼</button>
                                    </div>
                                </div>
                                 <span id="copy-youtube-feedback" class="mt-2 inline-block text-green-400 opacity-0 transition-opacity">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <div id="loader-container" class="loader-container hidden">
        <div class="loader"></div>
        <p id="loader-text" class="text-lg font-semibold">å‡¦ç†ä¸­...</p>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Common Elements & Functions ---
        const loaderContainer = document.getElementById('loader-container');
        const loaderText = document.getElementById('loader-text');
        const showLoader = (text = 'å‡¦ç†ä¸­...') => {
            loaderText.textContent = text;
            loaderContainer.classList.remove('hidden');
        };
        const hideLoader = () => { loaderContainer.classList.add('hidden'); };

        const handleRouting = () => {
            document.querySelectorAll('.tool-container').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-button').forEach(el => el.classList.remove('active'));
            const hash = window.location.hash.slice(1);
            let tool = new URLSearchParams(hash).get('tool');
            const validTools = ['narration', 'splitter', 'prompt', 'content', 'youtube'];
            if (!validTools.includes(tool)) { tool = 'narration'; }
            const targetToolEl = document.getElementById(`${tool}-tool`);
            const targetNavEl = document.getElementById(`nav-${tool}`);
            if (targetToolEl && targetNavEl) {
                targetToolEl.classList.add('active');
                targetNavEl.classList.add('active');
            }
        };
        document.querySelectorAll('.nav-button').forEach(button => {
            button.addEventListener('click', () => { window.location.hash = `tool=${button.dataset.tool}`; });
        });
        window.addEventListener('hashchange', handleRouting);
        handleRouting(); // Initial load

        // --- Generic Copy Function ---
        const setupCopyButton = (button, feedbackEl) => {
            button.addEventListener('click', () => {
                const targetId = button.dataset.target;
                const targetTextarea = document.getElementById(targetId);
                targetTextarea.select();
                try {
                    document.execCommand('copy');
                    if (feedbackEl) {
                        feedbackEl.classList.remove('opacity-0');
                        setTimeout(() => { feedbackEl.classList.add('opacity-0'); }, 2000);
                    }
                } catch (err) {
                    alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                }
            });
        };
        
        // --- AI Narration Assistant ---
        const narrationInput = document.getElementById('narration-input');
        const generateReadingBtn = document.getElementById('generate-reading-btn');
        const narrationSummary = document.getElementById('narration-summary');
        const narrationReading = document.getElementById('narration-reading');
        const convertToSpeechBtn = document.getElementById('convert-to-speech-btn');
        const narrationAudio = document.getElementById('narration-audio');
        const narrationDownload = document.getElementById('narration-download');

        if (generateReadingBtn) {
            generateReadingBtn.addEventListener('click', async () => {
                const text = narrationInput.value.trim();
                if (!text) { alert('åŸç¨¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'); return; }
                showLoader('æ¦‚è¦ã¨èª­ã¿æ–¹ã‚’ç”Ÿæˆä¸­...');
                const prompt = `ä»¥ä¸‹ã®æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã«ã¤ã„ã¦ã€1. è¦ç´„ã€2. å…¨ã¦ã®æ¼¢å­—ã‚’å«ã‚€å˜èªã®èª­ã¿æ–¹ã‚’ã‚«ã‚¿ã‚«ãƒŠã§ç¤ºã—ãŸå…¨æ–‡ã€ã®2ç‚¹ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚\n\nãƒ†ã‚­ã‚¹ãƒˆï¼š\n${text}\n\nå‡ºåŠ›ã¯ä»¥ä¸‹ã®JSONå½¢å¼ã§ãŠé¡˜ã„ã—ã¾ã™:\n{\n  "summary": "ã“ã“ã«è¦ç´„",\n  "reading": "ã“ã“ã«ã‚«ã‚¿ã‚«ãƒŠäº¤ã˜ã‚Šã®å…¨æ–‡"\n}`;
                try {
                    const result = await callGeminiAPI(prompt, true);
                    narrationSummary.value = result.summary;
                    narrationReading.value = result.reading;
                    ['narration-step2', 'narration-step3'].forEach(id => document.getElementById(id).classList.remove('hidden'));
                } catch (error) {
                    alert(`ç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}`);
                } finally { hideLoader(); }
            });
        }
        if (convertToSpeechBtn) {
            convertToSpeechBtn.addEventListener('click', async () => {
                const text = narrationReading.value.trim();
                if (!text) { alert('èª­ã¿æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'); return; }
                showLoader('éŸ³å£°ã«å¤‰æ›ä¸­...');
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{ parts: [{ text }] }],
                    generationConfig: { responseModalities: ["AUDIO"] },
                    model: "gemini-2.5-flash-preview-tts"
                };
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    const result = await response.json();
                    const part = result.candidates?.[0]?.content?.parts?.[0];
                    if (part?.inlineData?.data) {
                        const pcmData = base64ToArrayBuffer(part.inlineData.data);
                        const pcm16 = new Int16Array(pcmData);
                        const sampleRateMatch = part.inlineData.mimeType.match(/rate=(\d+)/);
                        const sampleRate = sampleRateMatch ? parseInt(sampleRateMatch[1], 10) : 24000;
                        const wavBlob = pcmToWav(pcm16, sampleRate);
                        const audioUrl = URL.createObjectURL(wavBlob);
                        narrationAudio.src = audioUrl;
                        narrationDownload.href = audioUrl;
                        narrationDownload.download = 'narration.wav';
                        narrationDownload.classList.remove('hidden');
                        document.getElementById('narration-step4').classList.remove('hidden');
                    } else { throw new Error('éŸ³å£°ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚'); }
                } catch (error) {
                    alert(`éŸ³å£°å¤‰æ›ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                } finally { hideLoader(); }
            });
        }

        // --- NotebookLM Prompt Generator ---
        const generatePromptBtn = document.getElementById('generate-prompt-btn');
        if (generatePromptBtn) {
            generatePromptBtn.addEventListener('click', () => {
                const raceName = document.getElementById('prompt-race-name').value.trim();
                const analysisType = document.getElementById('prompt-analysis-type').value;
                const focusPoints = Array.from(document.querySelectorAll('input[name="focus-point"]:checked')).map(el => el.value);
                if (!raceName) { alert('ãƒ¬ãƒ¼ã‚¹åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'); return; }

                const prompt = `ã‚ãªãŸã¯å„ªç§€ãªç«¶é¦¬åˆ†æã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
NotebookLMã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸè¤‡æ•°ã®ã‚½ãƒ¼ã‚¹ï¼ˆç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€éå»ãƒ‡ãƒ¼ã‚¿ã€èª¿æ•™æ˜ åƒã®æ–‡å­—èµ·ã“ã—ãªã©ï¼‰ã‚’æ¨ªæ–­çš„ã«åˆ†æã—ã€ä»¥ä¸‹ã®æŒ‡ç¤ºã«å¾“ã£ã¦ã€Œ${raceName}ã€ã®åˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

# åˆ†æã®ç›®çš„
${analysisType}

# åˆ†æã®è¦–ç‚¹
ç‰¹ã«ä»¥ä¸‹ã®ç‚¹ã«é‡ç‚¹ã‚’ç½®ã„ã¦ã€å„ã‚½ãƒ¼ã‚¹ã‹ã‚‰é–¢é€£æƒ…å ±ã‚’æŠ½å‡ºã—ã€çµ±åˆãƒ»è€ƒå¯Ÿã—ã¦ãã ã•ã„ã€‚
- ${focusPoints.join('\n- ')}

# å‡ºåŠ›å½¢å¼
- ã¾ãšã€å„åˆ†æè¦–ç‚¹ã«åŸºã¥ã„ãŸè©³ç´°ãªè€ƒå¯Ÿã‚’è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚
- æ¬¡ã«ã€è€ƒå¯Ÿã‹ã‚‰å°ãå‡ºã•ã‚Œã‚‹æ³¨ç›®é¦¬ã‚’3é ­æŒ™ã’ã€ãã®ç†ç”±ã‚’æ˜ç¢ºã«èª¬æ˜ã—ã¦ãã ã•ã„ã€‚
- æœ€å¾Œã«ã€åˆ†æå…¨ä½“ã®çµè«–ã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚

ã•ã‚ã€åˆ†æã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚`;
                const promptOutput = document.getElementById('prompt-output');
                promptOutput.value = prompt;
                document.getElementById('prompt-result-section').classList.remove('hidden');
            });
        }
        setupCopyButton(document.getElementById('copy-prompt-btn'), document.getElementById('copy-prompt-feedback'));
        
        // --- Content Generator ---
        const generateContentBtn = document.getElementById('generate-content-btn');
        if (generateContentBtn) {
            generateContentBtn.addEventListener('click', async () => {
                const theme = document.getElementById('content-theme').value.trim();
                const data = document.getElementById('content-data').value.trim();
                if (!theme || !data) { alert('åˆ†æãƒ†ãƒ¼ãƒã¨ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'); return; }
                showLoader('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆä¸­...');
                const prompt = `ã‚ãªãŸã¯ã€å°‚é–€çš„ãªåˆ†æã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã€ã‚¦ã‚§ãƒ–ã€ãƒ†ã‚­ã‚¹ãƒˆã€éŸ³å£°æ¦‚è¦ã®3ã¤ã®å½¢å¼ã§ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã™ã‚‹AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚ä»¥ä¸‹ã®å…¥åŠ›æƒ…å ±ã«åŸºã¥ã„ã¦ã€æŒ‡å®šã•ã‚ŒãŸå½¢å¼ã§å‡ºåŠ›ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã€å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€‘
1. åˆ†æãƒ†ãƒ¼ãƒ:
${theme}
2. åˆ†æãƒ‡ãƒ¼ã‚¿ (ãƒ†ã‚­ã‚¹ãƒˆ):
${data}
3. ã‚°ãƒ©ãƒ•ç”¨ãƒ‡ãƒ¼ã‚¿ (JSONå½¢å¼) ã®è‡ªå‹•ç”Ÿæˆ: 2ã®åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’è§£æã—ã€å¿…è¦ã«å¿œã˜ã¦ã‚¦ã‚§ãƒ–æ¤œç´¢ã§è£œè¶³çš„ãªçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã€ä»¥ä¸‹ã®JSONæ§‹é€ ã«å¾“ã£ã¦ã‚°ãƒ©ãƒ•ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚ãªãŸè‡ªèº«ã§ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
{ "doughnutChart": { ... }, "bubbleChart": { ... }, "barChart": { ... } }

ã€å‡ºåŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€‘
1. ã‚¦ã‚§ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç”Ÿæˆ (output.html): å…¥åŠ›ã«åŸºã¥ãã€ãƒ¢ãƒ€ãƒ³ã§è¦–è¦šçš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ã®å˜ä¸€HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã€‚
2. ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åŸç¨¿ã®ç”Ÿæˆ (script.md): ç´„1åˆ†åŠã§èª­ã‚ã‚‹ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åŸç¨¿ã‚’ä½œæˆã€‚
3. æ¦‚è¦ãƒ†ã‚­ã‚¹ãƒˆã®ç”Ÿæˆ (summary.md): è¦ç‚¹ã‚’ç®‡æ¡æ›¸ãã§ã¾ã¨ã‚ãŸã‚µãƒãƒªãƒ¼ã‚’ä½œæˆã€‚

ä¸Šè¨˜ã®æŒ‡ç¤ºã«å¾“ã„ã€3ã¤ã®å‡ºåŠ›ã‚’å˜ä¸€ã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¿”ã—ã¦ãã ã•ã„ã€‚JSONã®ã‚­ãƒ¼ã¯ "html", "script", "summary" ã¨ã—ã¦ãã ã•ã„ã€‚`;
                try {
                    const result = await callGeminiAPI(prompt, true, true);
                    document.getElementById('content-html-output').value = result.html;
                    document.getElementById('content-script-output').value = result.script;
                    document.getElementById('content-summary-output').value = result.summary;
                    document.getElementById('content-result-section').classList.remove('hidden');
                } catch (error) {
                    alert(`ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}`);
                } finally { hideLoader(); }
            });
        }
        document.querySelectorAll('#content-result-section .copy-button').forEach(button => {
             setupCopyButton(button, document.getElementById('copy-content-feedback'));
        });
        
        // --- YouTube Description Generator ---
        const generateYoutubeBtn = document.getElementById('generate-youtube-btn');
        if (generateYoutubeBtn) {
            generateYoutubeBtn.addEventListener('click', async () => {
                const inputs = {
                    raceName: document.getElementById('yt-race-name').value.trim(),
                    keyPoint: document.getElementById('yt-key-point').value.trim(),
                    horse1: document.getElementById('yt-horse1').value.trim(),
                    horse2: document.getElementById('yt-horse2').value.trim(),
                    darkhorse: document.getElementById('yt-darkhorse').value.trim(),
                    otherhorse: document.getElementById('yt-otherhorse').value.trim(),
                    analysisPoints: document.getElementById('yt-analysis-points').value.trim(),
                    mustInclude: document.getElementById('yt-must-include').value.trim(),
                };
                if (!inputs.raceName || !inputs.keyPoint || !inputs.horse1 || !inputs.horse2 || !inputs.darkhorse || !inputs.otherhorse || !inputs.analysisPoints) {
                    alert('ã€Œå¿…ãšå«ã‚ãŸã„å†…å®¹ã€ä»¥å¤–ã®ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'); return;
                }
                showLoader('ã‚¿ã‚¤ãƒˆãƒ«ã¨æ¦‚è¦æ¬„ã‚’ç”Ÿæˆä¸­...');
                const prompt = `ã‚ãªãŸã¯ã€Œã‚¦ãƒã‚­ã‚“ã‚°å…¬èªå¿œæ´chã€ã¨ã„ã†ç«¶é¦¬äºˆæƒ³ãƒãƒ£ãƒ³ãƒãƒ«ã®å„ªç§€ãªã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚ä»¥ä¸‹ã®##å…¥åŠ›æƒ…å ±ã¨##ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åŸºã«ã€é­…åŠ›çš„ã§ã‚¯ãƒªãƒƒã‚¯ã—ãŸããªã‚‹ã‚ˆã†ãªYouTubeã®ã‚¿ã‚¤ãƒˆãƒ«ã¨æ¦‚è¦æ¬„ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚Webæ¤œç´¢ã‚’æ´»ç”¨ã—ã¦ã€[æ ¼ä»˜ã‘]ã€[å¹´]ã€[ã‚³ãƒ¼ã‚¹ã®ç‰¹å¾´]ã€[ãƒ¬ãƒ¼ã‚¹ã®ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼]ã‚’è‡ªå‹•ã§è£œå®Œã—ã¦ãã ã•ã„ã€‚

## å…¥åŠ›æƒ…å ±
- ãƒ¬ãƒ¼ã‚¹å: ${inputs.raceName}
- ãƒ¬ãƒ¼ã‚¹ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ: ${inputs.keyPoint}
- æ³¨ç›®é¦¬1(æœ¬å‘½): ${inputs.horse1}
- æ³¨ç›®é¦¬2(å¯¾æŠ—): ${inputs.horse2}
- ä¼å…µé¦¬: ${inputs.darkhorse}
- ãã®ä»–ã®æ³¨ç›®é¦¬: ${inputs.otherhorse}
- åˆ†æãƒã‚¤ãƒ³ãƒˆ:\n${inputs.analysisPoints}
- æ¦‚è¦æ¬„ã«å¿…ãšå«ã‚ãŸã„å†…å®¹: ${inputs.mustInclude || 'ç‰¹ã«ãªã—'}

## ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
### YouTubeå‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«æ¡ˆ
ã€[ãƒ¬ãƒ¼ã‚¹å] [å¹´] æœ€çµ‚çµè«–ã€‘ãƒŠãƒ¼ãƒ„ã”ã‚“ã«ã‚ƒä¸­äº•ã®ã€ŒæœŸå¾…å€¤ã€ç†è«–ã§å°ãï¼[ãƒ¬ãƒ¼ã‚¹ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ]ã§æœ¬å½“ã«ç‹™ã†ã¹ãé¦¬ã¯â€¦

### YouTubeæ¦‚è¦æ¬„
ğŸ”¥ å‹•ç”»ã®æ¦‚è¦
çš†ã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ï¼ã‚¦ãƒã‚­ãƒ³ã‚°å…¬èªå¿œæ´chã§ã™ï¼
ä»Šé€±ã¯ã€[ãƒ¬ãƒ¼ã‚¹ã®ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼]ã€[æ ¼ä»˜ã‘] [ãƒ¬ãƒ¼ã‚¹å]ã‚’å¾¹åº•çš„ã«äºˆæƒ³è¨ºæ–­ã—ã¦ã„ãã¾ã™ï¼
èˆå°ã¯[ã‚³ãƒ¼ã‚¹ã®ç‰¹å¾´]ã€‚[ãƒ¬ãƒ¼ã‚¹ã®é›£æ˜“åº¦]ã‚’ã€æˆ‘ã€…ã¯ãƒŠãƒ¼ãƒ„ã”ã‚“ã«ã‚ƒä¸­äº•ã•ã‚“ãŒæå”±ã™ã‚‹ã€ŒæœŸå¾…å€¤ã€ã®è¦–ç‚¹ã‹ã‚‰å¾¹åº•è§£å‰–ï¼
[æ³¨ç›®é¦¬1]ã€[æ³¨ç›®é¦¬2]ã®äºŒå¼·å¯¾æ±ºãƒ ãƒ¼ãƒ‰ã§ã™ãŒã€ã“ã®ã‚¿ãƒ•ãªæ¡ä»¶ã§ã“ãæœŸå¾…å€¤ã®é«˜ã„ç©´é¦¬ãŒå­˜åœ¨ã™ã‚‹ã¯ãšï¼
${inputs.mustInclude ? `\n${inputs.mustInclude}\n` : ''}
ã“ã®å‹•ç”»ã‚’è¦‹ã‚Œã°ã€ã‚ãªãŸã®[ãƒ¬ãƒ¼ã‚¹å]äºˆæƒ³ãŒæ–°ãŸãªæ¬¡å…ƒã¸ï¼ãœã²æœ€å¾Œã¾ã§ã”è¦§ãã ã•ã„ï¼

(ä»¥ä¸‹ã€å®šå‹æ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯çœç•¥)

## å‡ºåŠ›å½¢å¼
ã‚ãªãŸã¯ä»¥ä¸‹ã®é …ç›®ã‚’å˜ä¸€ã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
{
  "title": "ï¼ˆç”Ÿæˆã•ã‚ŒãŸã‚¿ã‚¤ãƒˆãƒ«ï¼‰",
  "description": "ï¼ˆç”Ÿæˆã•ã‚ŒãŸæ¦‚è¦æ¬„ï¼‰"
}`;
                try {
                    const result = await callGeminiAPI(prompt, true, true);
                    document.getElementById('youtube-title-output').value = result.title;
                    document.getElementById('youtube-desc-output').value = result.description;
                    document.getElementById('youtube-result-section').classList.remove('hidden');
                } catch (error) {
                    alert(`ç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}`);
                } finally { hideLoader(); }
            });
        }
        setupCopyButton(document.querySelector('#youtube-result-section [data-target="youtube-title-output"]'), document.getElementById('copy-youtube-feedback'));
        setupCopyButton(document.querySelector('#youtube-result-section [data-target="youtube-desc-output"]'), document.getElementById('copy-youtube-feedback'));

        // --- Common Gemini API Call Function ---
        async function callGeminiAPI(prompt, jsonResponse = false, useSearch = false) {
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const payload = { contents: [{ parts: [{ text: prompt }] }] };
            if (jsonResponse) {
                payload.generationConfig = { responseMimeType: "application/json" };
            }
            if (useSearch) {
                payload.tools = [{ "google_search": {} }];
            }
            const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            if (!response.ok) throw new Error(`API Error: ${response.status}`);
            const result = await response.json();
            const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
            if (!text) throw new Error("APIã‹ã‚‰æœ‰åŠ¹ãªå¿œç­”ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚");
            return jsonResponse ? JSON.parse(text) : text;
        }

        // --- Audio Helper Functions ---
        function base64ToArrayBuffer(base64) {
            const binaryString = window.atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) { bytes[i] = binaryString.charCodeAt(i); }
            return bytes.buffer;
        }
        function pcmToWav(pcmData, sampleRate) {
            const numChannels = 1, bitsPerSample = 16;
            const byteRate = sampleRate * numChannels * bitsPerSample / 8;
            const blockAlign = numChannels * bitsPerSample / 8;
            const dataSize = pcmData.length * 2;
            const fileSize = 36 + dataSize;
            const buffer = new ArrayBuffer(fileSize + 8);
            const view = new DataView(buffer);
            view.setUint32(0, 0x52494646, false); // "RIFF"
            view.setUint32(4, fileSize, true);
            view.setUint32(8, 0x57415645, false); // "WAVE"
            view.setUint32(12, 0x666d7420, false); // "fmt "
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true);
            view.setUint16(22, numChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, byteRate, true);
            view.setUint16(32, blockAlign, true);
            view.setUint16(34, bitsPerSample, true);
            view.setUint32(36, 0x64617461, false); // "data"
            view.setUint32(40, dataSize, true);
            for (let i = 0; i < pcmData.length; i++) {
                view.setInt16(44 + i * 2, pcmData[i], true);
            }
            return new Blob([view], { type: 'audio/wav' });
        }
    });
</script>
</body>
</html>

